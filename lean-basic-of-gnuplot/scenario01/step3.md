# ãƒ‡ãƒ¼ã‚¿ã®æ¢ç´¢ - å®Ÿè¡Œæ™‚é–“ã®äºˆæ¸¬

## ğŸŸ¢ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚é–“ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™ï¼ˆã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ï¼‰

åˆ¥ã®ä¾‹ã¨ã—ã¦ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè¡Œæ™‚é–“ã‚’åˆ†æã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã¾ãšã€ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèªã—ã¾ã™ï¼š

`ls -la data/runtime.dat`{{execute}}

ã‚‚ã—ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã™ï¼š

`cat > data/runtime.dat << 'EOF'
# Size  Seconds
1000   0
2000   1
3000   2
4000   5
5000   8
6000   13
7000   19
8000   27
9000   39
10000  52
12000  91
14000  144
16000  217
18000  311
20000  432
25000  840
30000  1534
35000  2540
40000  3799
45000  5332
50000  7083
EOF`{{execute}}

ãƒ‡ãƒ¼ã‚¿ã®å†…å®¹ã‚’ç¢ºèªï¼š

`head -10 data/runtime.dat`{{execute}}

---

## ğŸ”µ ãƒ‡ãƒ¼ã‚¿ã®ãƒ—ãƒ­ãƒƒãƒˆï¼ˆgnuplotã‚³ãƒãƒ³ãƒ‰ï¼‰

gnuplotã‚’èµ·å‹•ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¾ã™ï¼š

`gnuplot`{{execute}}

`reset`{{execute}}

`set terminal png size 800,600`{{execute}}

`set output 'plots/runtime_linear.png'`{{execute}}

`set xlabel "ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚µã‚¤ã‚º"`{{execute}}

`set ylabel "å®Ÿè¡Œæ™‚é–“ [ç§’]"`{{execute}}

`set title "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚é–“"`{{execute}}

`plot "data/runtime.dat" using 1:2 with lines lw 2 title "å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿"`{{execute}}

`unset output`{{execute}}

ã“ã®ã‚°ãƒ©ãƒ•ã§ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚µã‚¤ã‚ºãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã¦å®Ÿè¡Œæ™‚é–“ãŒæ€¥æ¿€ã«å¢—åŠ ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

### å¯¾æ•°ãƒ—ãƒ­ãƒƒãƒˆã®æ´»ç”¨

ã“ã®ã‚ˆã†ãªå ´åˆã€ä¸¡å¯¾æ•°ãƒ—ãƒ­ãƒƒãƒˆãŒæœ‰åŠ¹ã§ã™ï¼š

`set output 'plots/runtime_loglog.png'`{{execute}}

`set logscale`{{execute}}

`set xlabel "ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚µã‚¤ã‚º"`{{execute}}

`set ylabel "å®Ÿè¡Œæ™‚é–“ [ç§’]"`{{execute}}

`set title "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚é–“ï¼ˆä¸¡å¯¾æ•°ãƒ—ãƒ­ãƒƒãƒˆï¼‰"`{{execute}}

`plot "data/runtime.dat" using 1:2 with points pt 7 ps 1 title "å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿"`{{execute}}

`unset output`{{execute}}

ä¸¡å¯¾æ•°ãƒ—ãƒ­ãƒƒãƒˆã§ç›´ç·šã«ãªã‚‹ã“ã¨ã‹ã‚‰ã€å®Ÿè¡Œæ™‚é–“ãŒã¹ãä¹—å‰‡ã«å¾“ã†ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

### ãƒ¢ãƒ‡ãƒ«ã¨ã®æ¯”è¼ƒ

ãƒ‡ãƒ¼ã‚¿ãŒã¹ãä¹—å‰‡ T ~ N^k ã«å¾“ã†ã¨ä»®å®šã—ã¦ã€ãƒ¢ãƒ‡ãƒ«ã¨æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

`set output 'plots/runtime_model.png'`{{execute}}

`set title "å®Ÿè¡Œæ™‚é–“ï¼šãƒ‡ãƒ¼ã‚¿ã¨ãƒ¢ãƒ‡ãƒ«ã®æ¯”è¼ƒ"`{{execute}}

`plot "data/runtime.dat" using 1:2 title "å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿" with points pt 7 ps 1.5, \
(x/2500)**3 title "ãƒ¢ãƒ‡ãƒ«: T = (N/2500)^3" with lines lw 2`{{execute}}

`unset output`{{execute}}

ãƒ¢ãƒ‡ãƒ«ãŒãƒ‡ãƒ¼ã‚¿ã¨ã‚ˆãä¸€è‡´ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

### äºˆæ¸¬ã®å®Ÿè¡Œ

ã“ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ã¦ã€ã‚ˆã‚Šå¤§ããªã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚µã‚¤ã‚ºã§ã®å®Ÿè¡Œæ™‚é–“ã‚’äºˆæ¸¬ã§ãã¾ã™ï¼š

`set output 'plots/runtime_prediction.png'`{{execute}}

`set title "å®Ÿè¡Œæ™‚é–“ã®äºˆæ¸¬"`{{execute}}

`set grid`{{execute}}

`plot [1000:100000][0.1:100000] \
"data/runtime.dat" using 1:2 title "å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿" with points pt 7 ps 1.5, \
(x/2500)**3 title "ãƒ¢ãƒ‡ãƒ«äºˆæ¸¬" with lines lw 2`{{execute}}

`unset output`{{execute}}

N=100,000ã§ã¯ç´„100,000ç§’ï¼ˆç´„28æ™‚é–“ï¼‰ã‹ã‹ã‚‹ã“ã¨ãŒäºˆæ¸¬ã•ã‚Œã¾ã™ã€‚

### ASCIIã§ã®ç¢ºèª

ç°¡å˜ã«å‚¾å‘ã‚’ç¢ºèªï¼š

`unset logscale`{{execute}}

`set terminal dumb`{{execute}}

`set logscale`{{execute}}

`plot [1000:50000] "data/runtime.dat" using 1:2`{{execute}}

ã¹ãä¹—å‰‡ã®ç‰¹å¾´çš„ãªå½¢çŠ¶ãŒç¢ºèªã§ãã¾ã™ã€‚

å…ƒã®è¨­å®šã«æˆ»ã—ã¾ã™ï¼š

`set terminal png size 800,600`{{execute}}

`unset logscale`{{execute}}

gnuplotã‚’çµ‚äº†ã—ã¾ã™ï¼š

`quit`{{execute}}

---

## ğŸŸ¢ ã‚°ãƒ©ãƒ•ã®ç¢ºèªï¼ˆã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ï¼‰

ä½œæˆã—ãŸã‚°ãƒ©ãƒ•ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼š

`ls plots/runtime*.png`{{execute}}

Webãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºã§ãã¾ã™ï¼š

- [å®Ÿè¡Œæ™‚é–“ãƒ‡ãƒ¼ã‚¿ï¼ˆç·šå½¢ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰]({{TRAFFIC_HOST1_8080}}/plots/runtime_linear.png)
- [å®Ÿè¡Œæ™‚é–“ãƒ‡ãƒ¼ã‚¿ï¼ˆä¸¡å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰]({{TRAFFIC_HOST1_8080}}/plots/runtime_loglog.png)
- [ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¢ãƒ‡ãƒ«ã®æ¯”è¼ƒ]({{TRAFFIC_HOST1_8080}}/plots/runtime_model.png)
- [å®Ÿè¡Œæ™‚é–“ã®äºˆæ¸¬]({{TRAFFIC_HOST1_8080}}/plots/runtime_prediction.png)

---

## ğŸ“ˆ ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«åˆ†æã®å¨åŠ›

ã“ã®ã‚ˆã†ã«ã€ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«åˆ†æã«ã‚ˆã‚Šï¼š

1. **ãƒ‡ãƒ¼ã‚¿ã®å‚¾å‘ã‚’è¦–è¦šçš„ã«æŠŠæ¡** - æ€¥æ¿€ãªå¢—åŠ ã‚’ç¢ºèª
2. **é©åˆ‡ãªãƒ¢ãƒ‡ãƒ«ã‚’é¸æŠ** - ä¸¡å¯¾æ•°ãƒ—ãƒ­ãƒƒãƒˆã§ã¹ãä¹—å‰‡ã‚’ç™ºè¦‹
3. **å°†æ¥ã®å€¤ã‚’äºˆæ¸¬** - ãƒ¢ãƒ‡ãƒ«ã‚’å¤–æŒ¿ã—ã¦äºˆæ¸¬

ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚é©åˆ‡ãªãƒ—ãƒ­ãƒƒãƒˆæ–¹æ³•ï¼ˆç·šå½¢ vs å¯¾æ•°ï¼‰ã®é¸æŠãŒã€ãƒ‡ãƒ¼ã‚¿ã®æœ¬è³ªã‚’ç†è§£ã™ã‚‹éµã¨ãªã‚Šã¾ã™ã€‚